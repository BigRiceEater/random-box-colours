<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Select Elements</title>
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>

    <style>
      #container {
        display: flex;
      }

      .box {
        width: 100px;
        height: 100px;
        margin: 20px;
        border-radius: 15px;
      }
    </style>
  </head>
  <body>
    <label for="message-box">Messages:</label>
    <textarea
      id="message-box"
      cols="100"
      rows="5"
      style="text-overflow: clip;"
    ></textarea>
    <div id="container"></div>
  </body>

  <script>
    $(document).ready(function () {
      initBoxes();
    });

    function log(msg) {
      const messageBox = $("#message-box");
      messageBox.append(`${new Date().toLocaleTimeString()}: ${msg}\n`);
      const position = messageBox.get(0).scrollHeight;
      messageBox.scrollTop(position);
    }

    // alt. method but not as nice as jQuery
    function logEx(msg) {
      const messageBoxDom = document.getElementById("message-box");
      messageBoxDom.innerHTML =
        messageBoxDom.innerHTML +
        `${new Date().toLocaleTimeString()}: ${msg}\n`;
      const position = messageBoxDom.scrollHeight;
      messageBoxDom.scrollTop = position;
    }

    function initBoxes() {
      log("Creating boxes");
      var boxes = $();
      for (i = 0; i < 6; i++) {
        boxes = boxes.add(createBox());
      }
      // Don't change DOM in loop multiple times
      // Append exactly 1 time for efficiency
      var container = $("#container");
      container.append(boxes);
    }

    function createBox() {
      const box = $("<div>")
        .addClass("box")
        .click(function () {
          randomBoxColor($(this));
        });
      randomBoxColor(box);
      return box;
    }

    function randomBoxColor(box) {
      box.css({ backgroundColor: createRGBValues() });
    }

    function createRGBValues() {
      const val = function () {
        return Math.floor(Math.random() * 255);
      };
      const rgb = `rgb(${val()},${val()},${val()})`;
      log(`generated ` + rgb);
      return rgb;
    }
  </script>
</html>
